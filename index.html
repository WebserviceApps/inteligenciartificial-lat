<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inteligencia Artificial LATAM | El Activo Digital Definitivo</title>
    
    <meta name="description" content="Inteligenciartificial.lat es el activo digital definitivo para liderar el mercado de IA en Latinoamérica.">
    <meta property="og:title" content="Inteligencia Artificial LATAM | El Activo Digital Definitivo">
    <meta property="og:description" content="Asegure la autoridad digital en la categoría de IA para toda una región. Adquiera el dominio que definirá el futuro de la tecnología en LATAM.">
    <meta property="og:image" content="images/og-image.jpg">

    <link rel="alternate" hreflang="es" href="https://inteligenciartificial.lat/">
    <link rel="alternate" hreflang="en" href="https://inteligenciartificial.lat/en/">
    <link rel="alternate" hreflang="pt" href="https://inteligenciartificial.lat/pt/">
    <link rel="alternate" hreflang="x-default" href="https://inteligenciartificial.lat/">

    <link rel="icon" href="images/favicon.png" type="image/png">
    <link rel="apple-touch-icon" href="images/apple-touch-icon.png">

    <script src="https://cdn.tailwindcss.com"></script>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&family=Source+Serif+Pro:wght@700;900&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/contentful@latest/dist/contentful.browser.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@contentful/rich-text-html-renderer@latest/dist/rich-text-html-renderer.browser.min.js"></script>

    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-5HJLWXD6');</script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #020617; color: #E0E7FF; }
        h1, h2 { font-family: 'Source Serif Pro', serif; }
        #hero-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        .info-card { background-color: rgba(30, 41, 59, 0.5); border: 1px solid #334155; transition: transform 0.3s ease, box-shadow 0.3s ease; }
        .info-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(59, 130, 246, 0.1); }
        .btn-primary { background-color: #3B82F6; color: white; transition: background-color 0.3s ease; }
        .btn-primary:hover { background-color: #2563EB; }
    </style>
</head>
<body class="antialiased">

    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-5HJLWXD6"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <header class="fixed top-0 left-0 w-full p-4 z-50">
        <div class="container mx-auto flex justify-end">
            <div class="relative">
                <button id="lang-selector-button" class="flex items-center gap-2 px-3 py-2 bg-slate-800/50 border border-slate-700 rounded-lg text-white hover:bg-slate-700/70 transition-colors">
                    <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418" /></svg>
                    <span id="current-lang-text">Español</span>
                    <svg class="w-4 h-4" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M19.5 8.25l-7.5 7.5-7.5-7.5" /></svg>
                </button>
                <div id="lang-selector-dropdown" class="hidden absolute right-0 mt-2 w-40 bg-slate-800 border border-slate-700 rounded-lg shadow-lg overflow-hidden">
                    <a href="#" class="lang-option block px-4 py-2 text-sm text-white hover:bg-blue-500" data-lang="es">Español</a>
                    <a href="#" class="lang-option block px-4 py-2 text-sm text-white hover:bg-blue-500" data-lang="en">English</a>
                    <a href="#" class="lang-option block px-4 py-2 text-sm text-white hover:bg-blue-500" data-lang="pt">Português</a>
                </div>
            </div>
        </div>
    </header>

    <section id="hero" class="relative w-full min-h-screen flex flex-col items-center justify-center text-center p-4 bg-slate-950 overflow-hidden">
        <canvas id="hero-canvas"></canvas>
        <div class="relative z-20">
            <h1 class="text-5xl md:text-7xl lg:text-8xl tracking-tighter text-white">inteligenciartificial.lat</h1>
            <h2 data-lang-key="heroSubtitle" class="mt-4 max-w-4xl mx-auto text-lg md:text-2xl font-semibold text-indigo-200"></h2>
            <a href="#contact" data-lang-key="heroButton" class="mt-10 inline-block px-8 py-4 text-lg font-bold rounded-lg btn-primary shadow-lg shadow-blue-500/20 transform hover:scale-105 transition-transform duration-300"></a>
        </div>
    </section>

    <section id="metrics" class="py-20 sm:py-24 bg-slate-900">
        <div class="container mx-auto px-6 lg:px-8">
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center">
                <div class="p-8 rounded-xl info-card metric-card">
                    <div class="flex justify-center items-center gap-x-3">
                        <svg class="w-6 h-6 text-blue-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 013 19.875v-6.75zM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V8.625zM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 01-1.125-1.125V4.125z" /></svg>
                        <h3 data-lang-key="metric1Title" class="text-sm font-semibold uppercase tracking-widest text-blue-400"></h3>
                    </div>
                    <p class="mt-2 text-4xl lg:text-5xl font-bold text-white" data-target="154.2">0</p>
                    <p data-lang-key="metric1Unit" class="text-base text-indigo-200"></p>
                </div>
                <div class="p-8 rounded-xl info-card metric-card">
                    <div class="flex justify-center items-center gap-x-3">
                        <svg class="w-6 h-6 text-blue-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M15.59 14.37a6 6 0 01-5.84 7.38v-4.8m5.84-2.58a14.98 14.98 0 006.16-12.12A14.98 14.98 0 009.63 2.25c-2.59 1.9-3.72 5.03-3.72 8.25 0 3.22 1.13 6.35 3.72 8.25a14.98 14.98 0 005.96-2.25z" /></svg>
                        <h3 data-lang-key="metric2Title" class="text-sm font-semibold uppercase tracking-widest text-blue-400"></h3>
                    </div>
                    <p class="mt-2 text-4xl lg:text-5xl font-bold text-white"><span data-target="29.2">0</span>%</p>
                    <p class="text-base text-indigo-200">(2023-2030)</p>
                </div>
                <div class="p-8 rounded-xl info-card metric-card">
                    <div class="flex justify-center items-center gap-x-3">
                        <svg class="w-6 h-6 text-blue-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" d="M18 18.72a9.094 9.094 0 003.741-.479 3 3 0 00-4.682-2.72m-7.282 2.72a3 3 0 01-4.682-2.72 9.094 9.094 0 013.741-.479m7.282 2.72a8.972 8.972 0 01-3.741-.479m3.741.479a4.5 4.5 0 01-4.242 0M12 12.75a4.5 4.5 0 110-9 4.5 4.5 0 010 9z" /></svg>
                        <h3 data-lang-key="metric3Title" class="text-sm font-semibold uppercase tracking-widest text-blue-400"></h3>
                    </div>
                    <p class="mt-2 text-4xl lg:text-5xl font-bold text-white"><span data-target="67">0</span>%</p>
                    <p data-lang-key="metric3Unit" class="text-base text-indigo-200"></p>
                </div>
            </div>
        </div>
    </section>
    <section id="thesis" class="py-20 sm:py-24">
        <div class="container mx-auto px-6 lg:px-8 max-w-5xl relative z-10">
            <div class="text-center">
                <h2 data-lang-key="thesisTitle" class="text-3xl lg:text-4xl font-bold text-white"></h2>
            </div>
            <div data-lang-key="thesisBody" class="mt-12 text-lg lg:text-xl text-indigo-200 leading-relaxed space-y-6 lg:columns-2 lg:gap-12"></div>
        </div>
    </section>
    <section id="advisors" class="py-20 sm:py-24 bg-slate-900">
        <div class="container mx-auto px-6 lg:px-8">
            <div class="text-center max-w-3xl mx-auto">
                <h2 data-lang-key="advisorsTitle" class="text-3xl lg:text-4xl font-bold text-white"></h2>
                <p data-lang-key="advisorsSubtitle" class="mt-4 text-lg text-indigo-200"></p>
            </div>
            <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-12 text-center">
                <div class="flex flex-col items-center">
                    <img class="h-32 w-32 rounded-full object-cover" src="images/asesor1.png" alt="Foto de Dr. Alejandro Vargas">
                    <h3 data-lang-key="advisor1Name" class="mt-6 text-xl font-bold text-white"></h3>
                    <p data-lang-key="advisor1Title" class="text-base text-blue-400"></p>
                    <p data-lang-key="advisor1Bio" class="mt-2 text-sm text-indigo-200"></p>
                </div>
                <div class="flex flex-col items-center">
                    <img class="h-32 w-32 rounded-full object-cover" src="images/asesor2.png" alt="Foto de Mateo Costa">
                    <h3 data-lang-key="advisor2Name" class="mt-6 text-xl font-bold text-white"></h3>
                    <p data-lang-key="advisor2Title" class="text-base text-blue-400"></p>
                    <p data-lang-key="advisor2Bio" class="mt-2 text-sm text-indigo-200"></p>
                </div>
                <div class="flex flex-col items-center">
                    <img class="h-32 w-32 rounded-full object-cover" src="images/asesor3.png" alt="Foto de Dra. Isabella Chen">
                    <h3 data-lang-key="advisor3Name" class="mt-6 text-xl font-bold text-white"></h3>
                    <p data-lang-key="advisor3Title" class="text-base text-blue-400"></p>
                    <p data-lang-key="advisor3Bio" class="mt-2 text-sm text-indigo-200"></p>
                </div>
            </div>
        </div>
    </section>
    <section id="models" class="py-20 sm:py-24">
        <div class="container mx-auto px-6 lg:px-8">
            <div class="text-center max-w-3xl mx-auto">
                <h2 data-lang-key="modelsTitle" class="text-3xl lg:text-4xl font-bold text-white"></h2>
                <p data-lang-key="modelsSubtitle" class="mt-4 text-lg text-indigo-200"></p>
            </div>
            <div class="mt-16 grid grid-cols-1 md:grid-cols-3 gap-8">
                <div class="p-8 text-center rounded-xl info-card">
                    <h3 data-lang-key="model1Title" class="text-xl font-bold text-white"></h3>
                    <p data-lang-key="model1Desc" class="mt-2 text-indigo-200"></p>
                </div>
                <div class="p-8 text-center rounded-xl info-card">
                    <h3 data-lang-key="model2Title" class="text-xl font-bold text-white"></h3>
                    <p data-lang-key="model2Desc" class="mt-2 text-indigo-200"></p>
                </div>
                <div class="p-8 text-center rounded-xl info-card">
                    <h3 data-lang-key="model3Title" class="text-xl font-bold text-white"></h3>
                    <p data-lang-key="model3Desc" class="mt-2 text-indigo-200"></p>
                </div>
            </div>
        </div>
    </section>
    <section id="roadmap" class="py-20 sm:py-24 bg-slate-900">
        <div class="container mx-auto px-6 lg:px-8">
            <div class="text-center max-w-3xl mx-auto">
                <h2 data-lang-key="roadmapTitle" class="text-3xl lg:text-4xl font-bold text-white"></h2>
                <p data-lang-key="roadmapSubtitle" class="mt-4 text-lg text-indigo-200"></p>
            </div>
            <div class="mt-16 max-w-5xl mx-auto">
                <div class="timeline grid grid-cols-1 md:grid-cols-3 gap-x-8 gap-y-16">
                    <div class="timeline-milestone text-center px-4">
                            <h3 data-lang-key="roadmap1Title" class="text-xl font-bold text-white"></h3>
                            <p data-lang-key="roadmap1Date" class="text-base font-semibold text-blue-400"></p>
                            <p data-lang-key="roadmap1Desc" class="mt-2 text-sm text-indigo-200"></p>
                    </div>
                    <div class="timeline-milestone text-center px-4">
                            <h3 data-lang-key="roadmap2Title" class="text-xl font-bold text-white"></h3>
                            <p data-lang-key="roadmap2Date" class="text-base font-semibold text-blue-400"></p>
                            <p data-lang-key="roadmap2Desc" class="mt-2 text-sm text-indigo-200"></p>
                    </div>
                    <div class="timeline-milestone text-center px-4">
                            <h3 data-lang-key="roadmap3Title" class="text-xl font-bold text-white"></h3>
                            <p data-lang-key="roadmap3Date" class="text-base font-semibold text-blue-400"></p>
                            <p data-lang-key="roadmap3Desc" class="mt-2 text-sm text-indigo-200"></p>
                    </div>
                </div>
            </div>
        </div>
    </section>
    <section id="contact" class="py-20 sm:py-24">
        <div class="container mx-auto px-6 lg:px-8 max-w-2xl">
            <div class="text-center">
                <h2 data-lang-key="formTitle" class="text-3xl lg:text-4xl font-bold text-white"></h2>
                <p data-lang-key="formSubtitle" class="mt-4 text-lg text-indigo-200"></p>
            </div>
            <form id="contact-form" class="mt-12">
                <div id="form-response" class="hidden p-4 mb-4 text-sm rounded-lg" role="alert"></div>
                <div class="grid grid-cols-1 gap-y-6 sm:grid-cols-2 sm:gap-x-8">
                    <div>
                        <label for="name" data-lang-key="formName" class="block text-sm font-semibold leading-6 text-indigo-100">Nombre</label>
                        <div class="mt-2.5">
                            <input type="text" name="name" id="name" autocomplete="name" required class="block w-full rounded-md border-0 px-3.5 py-2 bg-slate-800 text-white shadow-sm ring-1 ring-inset ring-slate-700 placeholder:text-slate-400 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm sm:leading-6">
                        </div>
                    </div>
                    <div>
                        <label for="email" data-lang-key="formEmail" class="block text-sm font-semibold leading-6 text-indigo-100">Email</label>
                        <div class="mt-2.5">
                            <input type="email" name="email" id="email" autocomplete="email" required class="block w-full rounded-md border-0 px-3.5 py-2 bg-slate-800 text-white shadow-sm ring-1 ring-inset ring-slate-700 placeholder:text-slate-400 focus:ring-2 focus:ring-inset focus:ring-blue-500 sm:text-sm sm:leading-6">
                        </div>
                    </div>
                </div>
                <div class="mt-10">
                    <button id="submit-button" type="submit" data-lang-key="formButton" class="block w-full rounded-md btn-primary px-3.5 py-3.5 text-center text-base font-semibold shadow-sm focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-blue-600">
                    </button>
                </div>
            </form>
        </div>
    </section>
    <section id="trust-logos" class="py-16 bg-slate-900">
        <div class="container mx-auto px-6 lg:px-8">
            <h3 data-lang-key="trustTitle" class="text-center text-sm font-semibold uppercase tracking-widest text-slate-400"></h3>
            <div class="mt-8 flow-root">
                <div class="mx-auto max-w-5xl grid grid-cols-2 sm:grid-cols-5 gap-y-8 gap-x-12 items-center">
                    <img class="h-8" src="images/logo-statista.png" alt="Logo Statista">
                    <img class="h-10" src="images/logo-forbes.png" alt="Logo Forbes">
                    <img class="h-10" src="images/logo-gartner.png" alt="Logo Gartner">
                    <img class="h-12" src="images/logo-eclac.png" alt="Logo ECLAC/CEPAL">
                    <img class="h-9" src="images/logo-idc.png" alt="Logo IDC">
                </div>
            </div>
        </div>
    </section>
    <footer class="bg-slate-950 border-t border-slate-800">
        <div class="container mx-auto px-6 py-8 text-center text-slate-400">
            <p data-lang-key="footerRights" class="mb-4"></p>
            <div class="flex justify-center gap-x-6">
                <a href="terminos.html" data-lang-key="footerTerms" class="text-sm hover:text-white transition-colors"></a>
                <a href="politica.html" data-lang-key="footerPolicy" class="text-sm hover:text-white transition-colors"></a>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const CONTENTFUL_SPACE_ID = 'xmg0akvdqvvq';
            const CONTENTFUL_ACCESS_TOKEN = 'AGNXICM0JNLOsMHVqBCVxAPPXLQrO9zBVHbIzk1bVQI';
            const CONTENTFUL_ENTRY_ID = '7eE4qilyVBnYrLSIGXimkE';

            const client = contentful.createClient({
                space: CONTENTFUL_SPACE_ID,
                accessToken: CONTENTFUL_ACCESS_TOKEN,
            });

            let translations = {};

            async function fetchContentfulData() {
                console.log("Iniciando conexión con Contentful para la entrada específica:", CONTENTFUL_ENTRY_ID);
                try {
                    const entry = await client.getEntry(CONTENTFUL_ENTRY_ID);
                    console.log("Respuesta de la API de Contentful RECIBIDA:", entry);

                    if (!entry || !entry.fields) {
                        throw new Error("La entrada de Contentful fue encontrada pero no contiene campos (fields).");
                    }

                    const fields = entry.fields;
                    console.log("Campos recibidos:", fields);
                    
                    const transformed = { es: {}, en: {}, pt: {} };

                    for (const key in fields) {
                        if (fields[key] && typeof fields[key] === 'object') {
                            if (fields[key]['es']) transformed.es[key] = fields[key]['es'];
                            if (fields[key]['en-US']) transformed.en[key] = fields[key]['en-US'];
                            if (fields[key]['pt']) transformed.pt[key] = fields[key]['pt'];
                        }
                    }
                    
                    console.log("Contenido transformado exitosamente:", transformed);
                    translations = transformed;
                    initializePage();

                } catch (error) {
                    console.error("Error DETALLADO al obtener el contenido de Contentful:", error);
                    document.body.innerHTML = `<div style="color: white; padding: 40px; text-align: center; font-family: sans-serif;"><h1>Error de Carga</h1><p>No se pudo cargar el contenido desde el CMS. Por favor, revise la consola del navegador para ver los detalles del error.</p></div>`;
                }
            }
            
            function initializePage() {
                const langSelectorButton = document.getElementById('lang-selector-button');
                const langSelectorDropdown = document.getElementById('lang-selector-dropdown');
                const currentLangText = document.getElementById('current-lang-text');

                const setLanguage = (lang) => {
                    const langMap = { es: 'Español', en: 'English', pt: 'Português' };
                    document.documentElement.lang = lang;

                    if (translations[lang]) {
                        currentLangText.innerText = langMap[lang] || 'Language';

                        document.querySelectorAll('[data-lang-key]').forEach(el => {
                            const key = el.dataset.langKey;
                            const content = translations[lang][key];
                            
                            if (content) {
                                if (key === 'thesisBody' && typeof content === 'object' && content.nodeType === 'document') {
                                    el.innerHTML = richTextHtmlRenderer.documentToHtmlString(content);
                                } else {
                                    el.innerHTML = content;
                                }
                            }
                        });
                    }
                    
                    langSelectorDropdown.classList.add('hidden');
                };

                langSelectorButton.addEventListener('click', () => langSelectorDropdown.classList.toggle('hidden'));
                document.querySelectorAll('.lang-option').forEach(el => {
                    el.addEventListener('click', (e) => {
                        e.preventDefault();
                        setLanguage(e.target.dataset.lang);
                    });
                });

                const userLang = navigator.language.split('-')[0] || 'es';
                const initialLang = ['es', 'en', 'pt'].includes(userLang) ? userLang : 'es';
                setLanguage(initialLang);
                
                // --- CÓDIGO DE ANIMACIONES Y FORMULARIO ---
                const canvas = document.getElementById('hero-canvas');
                if (canvas) {
                    const ctx = canvas.getContext('2d');
                    canvas.width = window.innerWidth;
                    canvas.height = window.innerHeight;
                    let particlesArray;
                    const mouse = { x: null, y: null, radius: (canvas.height/110) * (canvas.width/110) };
                    window.addEventListener('mousemove', (event) => { mouse.x = event.x; mouse.y = event.y; });
                    window.addEventListener('resize', () => { canvas.width = window.innerWidth; canvas.height = window.innerHeight; mouse.radius = (canvas.height/110) * (canvas.width/110); initParticles(); });
                    window.addEventListener('mouseout', () => { mouse.x = undefined; mouse.y = undefined; });
                    class Particle { constructor(x, y, directionX, directionY, size, color) { this.x = x; this.y = y; this.directionX = directionX; this.directionY = directionY; this.size = size; this.color = color; } draw() { ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2, false); ctx.fillStyle = 'rgba(59, 130, 246, 0.5)'; ctx.fill(); } update() { if (this.x > canvas.width || this.x < 0) { this.directionX = -this.directionX; } if (this.y > canvas.height || this.y < 0) { this.directionY = -this.directionY; } let dx = mouse.x - this.x; let dy = mouse.y - this.y; let distance = Math.sqrt(dx*dx + dy*dy); if (distance < mouse.radius + this.size){ if(mouse.x < this.x && this.x < canvas.width - this.size * 10){ this.x += 5; } if(mouse.x > this.x && this.x > this.size * 10){ this.x -= 5; } if(mouse.y < this.y && this.y < canvas.height - this.size * 10){ this.y += 5; } if(mouse.y > this.y && this.y > this.size * 10){ this.y -= 5; } } this.x += this.directionX; this.y += this.directionY; this.draw(); } }
                    function initParticles() { particlesArray = []; let numberOfParticles = (canvas.height * canvas.width) / 9000; for (let i=0; i < numberOfParticles; i++) { let size = (Math.random() * 2) + 1; let x = (Math.random() * ((innerWidth - size * 2) - (size * 2)) + size * 2); let y = (Math.random() * ((innerHeight - size * 2) - (size * 2)) + size * 2); let directionX = (Math.random() * .4) - .2; let directionY = (Math.random() * .4) - .2; particlesArray.push(new Particle(x, y, directionX, directionY, size, 'rgba(59, 130, 246, 0.5)')); } }
                    function animateParticles() { requestAnimationFrame(animateParticles); ctx.clearRect(0,0,innerWidth, innerHeight); for (let i=0; i < particlesArray.length; i++) { particlesArray[i].update(); } connectParticles(); }
                    function connectParticles(){ let opacityValue = 1; for(let a = 0; a < particlesArray.length; a++){ for(let b = a; b < particlesArray.length; b++){ let distance = ((particlesArray[a].x - particlesArray[b].x) * (particlesArray[a].x - particlesArray[b].x)) + ((particlesArray[a].y - particlesArray[b].y) * (particlesArray[a].y - particlesArray[b].y)); if(distance < (canvas.width/7) * (canvas.height/7)){ opacityValue = 1 - (distance/20000); ctx.strokeStyle = `rgba(59, 130, 246, ${opacityValue})`; ctx.lineWidth = 1; ctx.beginPath(); ctx.moveTo(particlesArray[a].x, particlesArray[a].y); ctx.lineTo(particlesArray[b].x, particlesArray[b].y); ctx.stroke(); } } } }
                    initParticles();
                    animateParticles();
                
                    const counters = document.querySelectorAll('.metric-card [data-target]');
                    const speed = 200; 
                    const animateCount = (counter) => {
                        const target = +counter.dataset.target;
                        const isFloat = String(target).includes('.');
                        const updateCount = () => {
                            const countText = (counter.innerText || '0').replace('%', '');
                            const count = +countText;
                            const inc = target / speed;
                            if (count < target) {
                                let newCount = count + inc;
                                counter.innerText = isFloat ? newCount.toFixed(1) : Math.ceil(newCount);
                                setTimeout(updateCount, 10);
                            } else {
                                counter.innerText = isFloat ? target.toFixed(1) : target;
                            }
                        };
                        updateCount();
                    };
                    const observer = new IntersectionObserver((entries, observer) => {
                        entries.forEach(entry => {
                            if (entry.isIntersecting) {
                                const elementToAnimate = entry.target;
                                animateCount(elementToAnimate);
                                observer.unobserve(entry.target);
                            }
                        });
                    }, { threshold: 0.8 });
                    counters.forEach(counter => {
                        observer.observe(counter);
                    });
                    
                    const form = document.getElementById('contact-form');
                    const submitButton = document.getElementById('submit-button');
                    const formResponse = document.getElementById('form-response');

                    form.addEventListener('submit', async (event) => {
                        event.preventDefault();
                        submitButton.disabled = true;
                        const currentLang = document.documentElement.lang || 'es';
                        const sendingText = { es: 'Enviando...', en: 'Sending...', pt: 'Enviando...' }[currentLang];
                        submitButton.textContent = sendingText;
                        
                        const data = { name: form.elements.name.value, email: form.elements.email.value };

                        try {
                            const response = await fetch('/.netlify/functions/submit-brevo', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify(data)
                            });
                            
                            if (!response.ok) {
                                const errorBody = await response.text();
                                throw new Error(`Error del servidor: ${response.status}. Detalles: ${errorBody}`);
                            }
                            
                            const successMessage = { es: '¡Gracias! Hemos recibido su solicitud. Nos pondremos en contacto con usted en breve.', en: 'Thank you! We will contact you shortly.', pt: 'Obrigado! Entraremos em contato em breve.' }[currentLang];
                            formResponse.textContent = successMessage;
                            formResponse.className = 'block p-4 mb-4 text-sm rounded-lg bg-green-900 text-green-300';
                            formResponse.classList.remove('hidden');
                            form.reset();

                        } catch (error) {
                            console.error('Error detallado en el envío del formulario:', error);
                            const errorMessage = { es: 'Hubo un error al enviar su solicitud. Por favor, inténtelo de nuevo más tarde.', en: 'There was an error sending your request. Please try again later.', pt: 'Ocorreu um erro ao enviar sua solicitação. Por favor, tente novamente.' }[currentLang];
                            formResponse.textContent = errorMessage;
                            formResponse.className = 'block p-4 mb-4 text-sm rounded-lg bg-red-900 text-red-300';
                            formResponse.classList.remove('hidden');
                        } finally {
                            submitButton.disabled = false;
                            if (translations[currentLang] && translations[currentLang].formButton) {
                                submitButton.innerText = translations[currentLang].formButton;
                            }
                        }
                    });
                }
            }
            fetchContentfulData();
        });
    </script>
</body>
</html>